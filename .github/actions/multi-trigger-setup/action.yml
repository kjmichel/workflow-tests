name: 'Multi trigger setup'
runs:
  using: composite
  steps:
    - name: Report initial status after workflow_run trigger
      if: ${{ github.event_name == 'workflow_run' }}
      uses: myrotvorets/set-commit-status-action@v2.0.1
      with:
        sha: ${{ github.event.workflow_run.head_sha }}
        status: pending
    - name: Fail on triggering workflow failure
      if: ${{
          github.event_name == 'workflow_run'
          && github.event.workflow_run.conclusion != 'success'
        }}
      run: |
        echo "Skipped tests due to failed trigger"
        exit 1
      shell: bash